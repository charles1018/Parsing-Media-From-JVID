services:
  jvid-dl:
    build:
      context: .
      dockerfile: Dockerfile
    image: jvid-dl:latest
    container_name: jvid-downloader
    
    # 環境變數（從 .env 檔案讀取）
    env_file:
      - .env
    
    # Volume 掛載
    volumes:
      # Cookie 檔案目錄掛載（只讀）
      # 自動搜尋 www.jvid.com_cookies.json, jvid_cookies.json, cookies.json
      - .:/app/cookies:ro
      # 下載目錄掛載（讀寫）
      - ./media:/app/media

    # 工作目錄
    working_dir: /app

    # 資源限制（可選）
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 2G
        reservations:
          cpus: '0.5'
          memory: 512M
    
